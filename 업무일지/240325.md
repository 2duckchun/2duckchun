# 240325 업무일지

## 어드민 모노레포

- 회사의 어드민 페이지를 모노레포로 관리하여 유지보수성과 개발속도를 높이려고 한다.
- 이에 따라 어드민 전용 모노레포를 구축했고, 새로운 시스템의 어드민 페이지 레이아웃을 미리 짜놓았다.
- 이번 프로젝트의 고객은 병원이고, 병원은 각각 어드민 페이지를 가져야하므로 어드민 계정마다 권한을 부여하기로 결정했다.
- 우리 회사는 높은 권한을, 병원은 낮은 권한을 주어 관리할 것이다.
- 권한은 일단 'XXX'과 'XXXX' 2가지로만 구분했다. 나중에 권한을 추가로 늘리기 편하게 확장성을 고려할 필요가 있다.

## 오늘 만난 에러

### 프로젝트의 git 이력이 달라 생긴 에러

- 작업물을 먼저 만들고나서 회사 리포지토리에 커밋, 푸쉬를 하니 에러가 났다.
- 에러는 `error: failed to push some refs to 'https://github.com/dabledev/dable_admin.git'` 였다.
- 이는 원격 저장소의 변경 사항이 로컬에 이미 통합되었을 때 나타나는 에러이다.
- `git pull origin main` 명령어를 입력해서 로컬 저장소를 최신상태로 유지해서 문제를 해결하고자 하였다.
- 그럼에도 불구하고 에러가 또 났다. 에러메세지는 `fatal: refusing to merge unrelated histories` 였다.
- 이 에러는 내가 미리 작업한 산출물의 git과 회사 리포지토리의 git의 이력이 달라서 생긴 에러이다.
- 이런 에러는 사실상 나면 안되는 에러이다. 일단 `git pull origin main --allow-unrelated-histories` 명령어를 사용해 관련없는 이력을 머지할 수 있게 했다.
- 이 사건은 회사 git에 대한 권한이 나에게 없는 관계로 작업자가 리포지토리를 새롭게 만들 수 없는 상황에서 작업자가 먼저 따로 작업을 해서 벌어진 일이었다. 사실 작업 전에 리포지토리 개설을 요청드렸으나 그 시간이 많이 지연되었다.
- 다음부터 이런일이 재발하지 않도록 회사 git 계정에 대한 정보를 받아놓았다.

### 테일윈드 인텔리센스 먹통 해결

- 테일윈드 인텔리센스는 VSCode의 익스텐션으로, 프로젝트에 사용중인 테일윈드 클래스네임을 적절하게 처리하여 사용자가 사용하기 편하게끔 자동완성을 제공한다.
- 동작원리는 프로젝트의 `tailwind.config.js`를 읽어 작성하고 있는 코드의 클래스네임에 대조시키는 것이라고 볼 수 있다.
- 따라서 `tailwind.config.js`에 문제가 있다면 테일윈드 인텔리센스는 정상적으로 동작하지 않는다. 
- 테일윈드 인텔리센스를 비롯한 익스텐션 문제들은 터미널의 `OUTPUT` 탭에 남는 에러메세지를 참고하여 해결할 수 있다.
- 나의 경우, `tailwind.config.js`의 플러그인 중 하나인 `tailwind-animate`의 `peerDependencies`가 꼬여 인텔리센스가 정상적으로 동작하지 않았다.
- `peerDependencies` 문제를 해결하니 자연스레 문제가 해결되었다.

## 오늘의 반성

- 사실 사무실 이사때문에 개발보다 노가다를 더 많이 한 날이다. 코드 친건 몇시간 안된다.
- 산출물을 만들때 너무 많은 범위를 한번에 생각하지말고 문제를 쪼개 하나씩 하나씩 구현해보자. (문제를 쪼갠다는 것은 가장 기본적인 문제해결 방법이지만, 알고 있음에도 그대로 행동하기는 어렵다. 시간이 좀 더 필요할 듯) (ex) 네브바 + 로그인, 사이드바, 메인 등등
- 설계는 언제나 필요하지만 필요 이상으로 과도한 설계는 스타트업에게는 짐이될 수 있다. 특히 프론트엔드의 경우에는 검증 및 방향성 수정이 빨리 일어나야 하므로 더 그럴 것이다.